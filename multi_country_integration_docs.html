<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ombaa Multi-Country Data Integration Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 text-gray-800">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-green-600 mb-2">Ombaa Multi-Country Data Integration</h1>
            <p class="text-lg text-gray-600">Comprehensive guide for integrating scraped data from multiple European countries</p>
        </header>

        <section class="mb-8 bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-bold mb-4">Overview</h2>
            <p class="mb-4">This document explains how the scraped solar park data from multiple European countries has been processed and integrated into the Ombaa directory website. The integration follows a modular approach that allows for easy updates and expansion as more data becomes available.</p>
            
            <div class="bg-green-50 border-l-4 border-green-500 p-4 mb-4">
                <p class="font-medium">207 solar parks from the Netherlands, France, UK, and Germany have been successfully processed and integrated into the directory.</p>
            </div>
            
            <div class="mt-6">
                <h3 class="text-xl font-bold mb-2">Country Breakdown</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="bg-blue-50 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-blue-600">48</div>
                        <div class="text-sm text-gray-600">Netherlands</div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-blue-600">42</div>
                        <div class="text-sm text-gray-600">France</div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-blue-600">58</div>
                        <div class="text-sm text-gray-600">United Kingdom</div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-blue-600">59</div>
                        <div class="text-sm text-gray-600">Germany</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-8 bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-bold mb-4">Data Processing Methodology</h2>
            <p class="mb-4">Each country's data was processed using a specialized Python script that:</p>
            <ul class="list-disc pl-6 mb-4 space-y-2">
                <li>Filters entries to identify genuine solar parks using country-specific keywords</li>
                <li>Extracts and normalizes location information</li>
                <li>Estimates park size in hectares when not explicitly provided</li>
                <li>Determines vegetation types based on available descriptions</li>
                <li>Maps entries to regions/provinces within each country</li>
                <li>Structures the data according to the Ombaa directory schema</li>
            </ul>
            
            <h3 class="text-xl font-bold mt-6 mb-2">Country-Specific Adaptations</h3>
            <div class="overflow-x-auto">
                <table class="min-w-full bg-white">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="py-2 px-4 border-b text-left">Country</th>
                            <th class="py-2 px-4 border-b text-left">Language Adaptations</th>
                            <th class="py-2 px-4 border-b text-left">Regional Mapping</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="py-2 px-4 border-b">Netherlands</td>
                            <td class="py-2 px-4 border-b">Dutch keywords: "zonnepark", "zonnepanelen"</td>
                            <td class="py-2 px-4 border-b">Provinces (e.g., Noord-Holland, Friesland)</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4 border-b">France</td>
                            <td class="py-2 px-4 border-b">French keywords: "parc solaire", "centrale photovoltaïque"</td>
                            <td class="py-2 px-4 border-b">Regions (e.g., Occitanie, Provence-Alpes-Côte d'Azur)</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4 border-b">United Kingdom</td>
                            <td class="py-2 px-4 border-b">English keywords: "solar farm", "solar park", "PV array"</td>
                            <td class="py-2 px-4 border-b">Countries (England, Scotland, Wales, Northern Ireland)</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4 border-b">Germany</td>
                            <td class="py-2 px-4 border-b">German keywords: "Solarpark", "Photovoltaikanlage"</td>
                            <td class="py-2 px-4 border-b">Federal states (e.g., Bayern, Niedersachsen)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <h3 class="text-xl font-bold mt-6 mb-2">Unified Data Schema</h3>
            <div class="bg-gray-100 p-4 rounded overflow-auto">
                <pre class="text-sm">
{
  "name": "Solar Park Name",
  "location": "Full Address",
  "country": "Country Name",
  "region": "Region/Province Name",
  "total_hectares": 25.5,
  "vegetation_type": "Mixed grass",
  "contact_email": "contact@example.com",
  "contact_phone": "+1234567890",
  "website": "https://example.com",
  "coordinates": {
    "latitude": 52.1234,
    "longitude": 5.6789
  }
}
                </pre>
            </div>
        </section>

        <section class="mb-8 bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-bold mb-4">Multi-Country Integration</h2>
            <p class="mb-4">The processed data from all countries has been integrated into the directory using an enhanced JavaScript module that:</p>
            <ul class="list-disc pl-6 mb-4 space-y-2">
                <li>Loads the combined JSON data file asynchronously</li>
                <li>Dynamically creates HTML elements for each solar park</li>
                <li>Implements pagination with "Load More" functionality</li>
                <li>Supports filtering by country, region, and listing type</li>
                <li>Dynamically populates country and region filter dropdowns</li>
                <li>Maintains the consistent design of the directory</li>
            </ul>
            
            <h3 class="text-xl font-bold mt-6 mb-2">File Structure</h3>
            <div class="bg-gray-100 p-4 rounded">
                <ul class="text-sm space-y-1">
                    <li><span class="font-mono text-green-600">/data/processed_solar_parks_combined.json</span> - The combined data file with all countries</li>
                    <li><span class="font-mono text-green-600">/js/multi-country-directory.js</span> - JavaScript for loading and displaying the multi-country data</li>
                    <li><span class="font-mono text-green-600">/directory.html</span> - The main directory page that loads the data</li>
                </ul>
            </div>
            
            <h3 class="text-xl font-bold mt-6 mb-2">Country-Specific Filtering</h3>
            <p class="mb-4">The integration includes enhanced filtering capabilities:</p>
            <ul class="list-disc pl-6 mb-4 space-y-2">
                <li>Country filter dynamically populated with available countries</li>
                <li>Region filter that updates based on selected country</li>
                <li>Automatic counting of results based on applied filters</li>
                <li>Reset filters option when no results are found</li>
            </ul>
        </section>

        <section class="mb-8 bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-bold mb-4">Deployment Instructions</h2>
            <p class="mb-4">To deploy the multi-country directory:</p>
            <ol class="list-decimal pl-6 mb-4 space-y-2">
                <li>Create a <span class="font-mono">/data</span> directory in your web root</li>
                <li>Copy <span class="font-mono">processed_solar_parks_combined.json</span> to the <span class="font-mono">/data</span> directory</li>
                <li>Include the <span class="font-mono">multi-country-directory.js</span> script in your directory.html page</li>
                <li>Update your HTML to include the country and region filter elements:
                    <div class="bg-gray-100 p-4 rounded mt-2 mb-4">
                        <pre class="text-sm">
&lt;div class="filters mb-6"&gt;
  &lt;div class="grid grid-cols-1 md:grid-cols-3 gap-4"&gt;
    &lt;div&gt;
      &lt;label for="country-filter" class="block text-sm font-medium text-gray-700 mb-1"&gt;Country&lt;/label&gt;
      &lt;select id="country-filter" class="w-full px-3 py-2 border border-gray-300 rounded-md"&gt;
        &lt;option value="all"&gt;All Countries&lt;/option&gt;
        &lt;!-- Dynamically populated by JavaScript --&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div&gt;
      &lt;label for="region-filter" class="block text-sm font-medium text-gray-700 mb-1"&gt;Region&lt;/label&gt;
      &lt;select id="region-filter" class="w-full px-3 py-2 border border-gray-300 rounded-md" disabled&gt;
        &lt;option value="all"&gt;All Regions&lt;/option&gt;
        &lt;!-- Dynamically populated by JavaScript --&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class="flex items-end"&gt;
      &lt;button id="apply-filters" class="bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 transition duration-300"&gt;Apply Filters&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
                        </pre>
                    </div>
                </li>
                <li>Ensure the HTML contains elements with the correct IDs:
                    <ul class="list-disc pl-6 mt-2">
                        <li><span class="font-mono">solar-farms-list</span> - Container for solar farm listings</li>
                        <li><span class="font-mono">solar-farms-count</span> - Element to display the count of results</li>
                        <li><span class="font-mono">load-more-farms</span> - Button for loading more listings</li>
                    </ul>
                </li>
            </ol>
            
            <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 mt-4">
                <p class="font-medium">Note: The contact functionality requires the contact modal implementation from the original directory.html file.</p>
            </div>
        </section>

        <section class="mb-8 bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-bold mb-4">Future Expansion</h2>
            <p class="mb-4">The system is designed for easy expansion in several ways:</p>
            
            <h3 class="text-xl font-bold mt-4 mb-2">Adding More Countries</h3>
            <ol class="list-decimal pl-6 mb-4 space-y-2">
                <li>Create a country-specific processing script based on the existing templates</li>
                <li>Adapt the keyword lists and region mapping for the new country</li>
                <li>Process the data and add the output file to the combine script</li>
                <li>Run the combine script to create an updated combined dataset</li>
            </ol>
            
            <h3 class="text-xl font-bold mt-4 mb-2">Adding Shepherd Data</h3>
            <p class="mb-4">For the planned shepherd/sheep farm data:</p>
            <ol class="list-decimal pl-6 mb-4 space-y-2">
                <li>Create similar processing scripts for shepherd data from each country</li>
                <li>Use a similar but distinct schema for shepherd listings</li>
                <li>Create a separate combined JSON file for all shepherd data</li>
                <li>Extend the JavaScript to load and display shepherd listings in the appropriate container</li>
                <li>Add matching functionality to suggest potential partnerships between nearby solar parks and shepherds</li>
            </ol>
            
            <h3 class="text-xl font-bold mt-4 mb-2">API Integration</h3>
            <p class="mb-4">For direct API integration with Apify:</p>
            <ol class="list-decimal pl-6 mb-4 space-y-2">
                <li>Create a server-side script to periodically fetch data from the provided API URLs</li>
                <li>Process the data using the existing scripts</li>
                <li>Update the combined JSON file automatically</li>
                <li>Implement a caching mechanism to reduce API calls</li>
            </ol>
        </section>

        <footer class="text-center text-gray-600 mt-12">
            <p>Ombaa Multi-Country Directory Data Integration Documentation - May 2025</p>
        </footer>
    </div>
</body>
</html>
